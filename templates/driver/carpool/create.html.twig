{% extends 'base.html.twig' %}

{% block title %}Créer covoiturages
{% endblock %}

{% block importmap %}
	{{ importmap(['app', 'showMap', 'calculateTime', 'dateSearch' ]) }}
{% endblock %}

{% block stylesheets %}
	{# base.html.twig styles block #}
	{{ parent() }}
	<!-- Leaflet CSS -->
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
{% endblock %}

{% block javascripts %}
	{# base.html.twig JS block #}
	{{ parent() }}
	<!-- Leaflet script -->
	<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
	<script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>
{% endblock %}


{% block body %}

	<section>
		<h1>Créer covoiturages</h1>

		<div class="container mb-3">
            <!-- CreateCarpool Form -->
			{{ form_start(carpoolForm) }}

            <!-- dateSearch.js -->
			{{ form_row(carpoolForm.day) }}
			{{ form_row(carpoolForm.address_start) }}
			{{ form_row(carpoolForm.address_end) }}
			{{ form_row(carpoolForm.begin) }}
			{{ form_row(carpoolForm.end) }}
			<div>
				{{ form_row(carpoolForm.price) }}
				<p>2 crédits iront à la plateforme</p>
			</div>
			{{ form_row(carpoolForm.car) }}
			{{ form_row(carpoolForm.isEcological) }}

			<div class="mt-3">
				<button class="btn btn-primary" type="submit">Ajouter</button>
			</div>
			{{ form_end(carpoolForm) }}
		</div>
        <div class="container mb-3">
		<button type="button" class="btn btn-info" data-bs-toggle="collapse" data-bs-target="#addCar">Ajouter un véhicule</button>
		<div class="collapse" id="addCar">
			<h2>Ajouter un véhicule</h2>
			{{ form_start(carForm) }}
			{{ form_widget(carForm) }}
			<button type="submit" class="btn btn-primary">Ajouter le véhicule</button>
			{{ form_end(carForm) }}
		</div>
        </div>
		<div class="container col-lg-8 mb-5">
			<h2>Apercu du trajet</h2>
            <!-- ShowMap.js -->
			<div id="map" style="height: 500px;"></div>
		</div>
	</section>
	<style>
		.leaflet-routing-container .leaflet-routing-alt table {
			display: none !important;
		}
		.leaflet-routing-container .leaflet-routing-alt h2 {
			display: none !important;
		}
	</style>
{% endblock %}
